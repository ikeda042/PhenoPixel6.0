# PhenoPixel6.0

PhenoPixel6.0 is a backend + frontend app for microscopy cell extraction and
batch analytics. The backend exposes APIs under `/api/v1`, and the frontend
provides a UI for running workflows.

## Cell Extraction
Cell extraction converts ND2 microscopy files into per-cell crops, contour
overlays, and SQLite databases for downstream analysis. The backend runs the
pipeline asynchronously and exposes the results via the API.

![Cell extraction preview](docs/screen-records/cell-extraction.preview.gif)

[Cell extraction walkthrough (mp4)](docs/screen-records/cell-extraction.compressed.mp4)

## Requirements

- Python 3.x (Launch uses `python3.14`)
- Node.js with npm (frontend dev/build)
- SQLite (used by the backend; databases generated by Cell Extraction)

## Quick Start

Backend:

```sh
python3.14 -m venv venv
source ./venv/bin/activate
cd backend
pip install -r requirements.txt
python main.py
```

Frontend:

```sh
cd frontend
npm install
npm run dev
```

- Backend: http://localhost:3000
- Frontend dev server: http://localhost:3001

## Local URLs

- API base: http://localhost:3000/api/v1
- Swagger UI (OpenAPI): http://localhost:3000/api/v1/docs
- OpenAPI JSON: http://localhost:3000/api/v1/openapi.json
- Health check: http://localhost:3000/api/v1/health

## Docker Deploy (Traefik)

Use `docker/compose.yaml` to start Traefik + backend.

1) Create `backend/.env` (use `backend/.env.template` as a reference)
2) Set `SERVER_HOST` and `TRAEFIK_ACME_EMAIL`
3) Start:

```sh
cd docker
docker compose -f compose.yaml up -d --build
```

Traefik uses `80/443`. Access the hostname set in `SERVER_HOST`, and the API
is exposed under `/api/v1`.

## Tech Stack

Backend:

<p align="left">
  <a href="https://fastapi.tiangolo.com/" title="FastAPI">
    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/fastapi/fastapi-original.svg" height="32" alt="FastAPI" />
  </a>
  <a href="https://www.sqlalchemy.org/" title="SQLAlchemy">
    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/sqlalchemy/sqlalchemy-original.svg" height="32" alt="SQLAlchemy" />
  </a>
  <a href="https://numpy.org/" title="NumPy">
    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/numpy/numpy-original.svg" height="32" alt="NumPy" />
  </a>
  <a href="https://opencv.org/" title="OpenCV">
    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/opencv/opencv-original.svg" height="32" alt="OpenCV" />
  </a>
  <a href="https://matplotlib.org/" title="Matplotlib">
    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/matplotlib/matplotlib-original.svg" height="32" alt="Matplotlib" />
  </a>
</p>

- FastAPI, Uvicorn, Pydantic for the API layer
- SQLAlchemy for SQLite access
- NumPy, OpenCV, Matplotlib for image processing and plotting

Frontend:

<p align="left">
  <a href="https://react.dev/" title="React">
    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/react/react-original.svg" height="32" alt="React" />
  </a>
  <a href="https://vitejs.dev/" title="Vite">
    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/vite/vite-original.svg" height="32" alt="Vite" />
  </a>
  <a href="https://www.typescriptlang.org/" title="TypeScript">
    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/typescript/typescript-original.svg" height="32" alt="TypeScript" />
  </a>
  <a href="https://chakra-ui.com/" title="Chakra UI">
    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/chakraui/chakraui-original.svg" height="32" alt="Chakra UI" />
  </a>
</p>

- React + React Router for the UI
- Vite for dev/build tooling
- Chakra UI and Framer Motion for styling and motion

## Docs

- Bulk Engine API: [backend/app/bulk_engine/README.md](backend/app/bulk_engine/README.md)
- Cell Extraction API: [backend/app/cellextraction/README.md](backend/app/cellextraction/README.md)
- Frontend: [frontend/README.md](frontend/README.md)
